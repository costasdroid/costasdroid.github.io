---
layout: post
title:  "Τα μαθηματικά πίσω από το Bridge"
date:   2019-08-14 15:40:00 +0300
categories: maths bridge statistics
image: /assets/bridge.jpg
description: Η περιπλοκότητα του αγωνιστικού Bridge και τα μαθηματικά για σωστό παίξιμο.
comments: true
---

# Ξεκινώντας
Σε μελλοντική ανάρτηση θα περιγράψω και πώς παίζεται το παιχνίδι αλλά τώρα, μετά από σχεδόν ενός χρόνου μαθημάτων στον ΟΑΜΘ (Ομιλος Αγωνιστικού Bridge Θεσσαλονίκης) και αφού έχω ξύσει την επιφάνεια όσων συνολικά μπορώ να μάθω, σκόνταψα στις πιθανότητες. Και βέβαια υπάρχουν πολλά site που τις παρουσιάζουν, αλλά θα βάλω και την δική μου προσπάθεια.

# Ποιούς αφορά
Κάθε παίχτη του Bridge. Οι προϋποθέσεις σε γνώσεις θα είναι διαφορετικές σε κάθε ανάρτηση. Στην συγκεκριμένη χρειάζεται μόνο ένας τύπος. Οι συνδιασμοί των $ν$ ανά $κ$ που συμβολίζεται με ${ν \choose κ}=\frac{ν!}{κ!(ν-κ)!}$ και δίνει τον αριθμό των κ-άδων που μπορούν να σχηματιστούν από ν-διαφορετικά πράγματα, χωρίς επανατοποθέτηση και χωρίς να μας ενδιαφέρει η σειρά. Για παράδειγμα από τα 1, 2 και 3 μπορώ να σχηματίσω ${3 \choose 2}=\frac{3!}{2!(3-2)!=3$ 2-άδες, τις ${1,2}$, ${1,3}$ και ${2,3}$.

# Τα εύκολα

## Αριθμός χεριών
Όταν μοιραστούν τα χαρτιά στο χέρι σου και τα δεις, στάσου λίγο να σκεφτείς ότι δεν θα ξαναέρθουν στην ζωή σου τα ίδια χαρτιά, μιας και υπάρχουν ${52 \choose 13}=635.013.559.600$ διαφορετικά χέρια μόνο για έναν παίχτη, αφού τόσες είναι οι 13-άδες που σχηματίζονται από 52 φύλλα. Σκέψου μόνο ότι το Joker έχει $24.435.180$ διαφορετικές στήλες.
Αν τώρα θέλεις να υπολογίσεις τα συνολικά χέρια (μαζί με τους αντιπάλους και τον συμπαίκτη) έχεις: από τα 52 να πάρεις 13, από τα υπόλοιπα 39 τα 13, από τα υπόλοιπα 26 τα 13 και τέλος από τα 13 τα 13. Δηλαδή

$${52\choose 13} {39\choose 13} {26\choose 13} {13\choose 13} = 53.644.737.765.488.792.839.237.440.000$$

Ίσως και λίγα παραπάνω αφού μπορεί να ξεκινάει την αγορά ένας εκ των Ανατολή, Δύση, Βορράς ή Νότος.

## Κατανομή χεριού
Με 13 φύλλα στο χέρι μπορείς να έχεις π.χ. κατανομή 5323 ή 0445. Ας είναι η κατανομή X-Y-Z-W με X, Y, Z και W από $0$ έως $13$. Διαλέγουμε X από τα 13, Y από τα 13, Z από τα 13 και W από 13. Με έναν τύπο:

$${13 \choose X}{13 \choose Y}{13 \choose Z}{13 \choose W}$$

Στον παρακάτω πίνακα υπολογίζονται όλες οι περιπτώσεις για να έχουμε την συγκεκριμένη κατανομή, ταξινομημένες από την πιο κοινή στην σπανιότερη.

| Κατανομή | Περιπτώσεις |Πιθανότητα|
|:--------:|:------------:|:--------:|
| 4-3-3-3  | 16726464040 | 0.0263403      |
| 4-4-3-2  | 11404407300 | 0.0179593      |
| 5-3-3-2  | 8211173256  | 0.0129307      |
| 5-4-2-2  | 5598527220  | 0.00881639     |
| 4-4-4-1  | 4751836375  | 0.00748305     |
| 5-4-3-1  | 3421322190  | 0.00538779     |
| 6-3-2-2  | 2985881184  | 0.00470207     |
| 6-3-3-1  | 1824705168  | 0.00287349     |
| 5-5-2-1  | 1679558166  | 0.00264492     |
| 6-4-2-1  | 1244117160  | 0.0019592      |
| 7-2-2-2  | 814331232   | 0.00128238     |
| 5-4-4-0  | 657946575   | 0.00103611     |
| 7-3-2-1  | 497646864   | 0.000783679    |
| 5-5-3-0  | 473721534   | 0.000746002    |
| 6-5-1-1  | 373235148   | 0.000587759    |
| 6-4-3-0  | 350904840   | 0.000552594    |
| 7-4-1-1  | 207352860   | 0.000326533    |
| 6-5-2-0  | 172262376   | 0.000271274    |
| 7-3-3-0  | 140361936   | 0.000221038    |
| 8-2-2-1  | 101791404   | 0.000160298    |
| 7-4-2-0  | 95701320    | 0.000150708    |
| 8-3-1-1  | 62205858    | 0.0000979599   |
| 6-6-1-0  | 38280528    | 0.000060283    |
| 7-5-1-0  | 28710396    | 0.0000452123   |
| 8-3-2-0  | 28710396    | 0.0000452123   |
| 8-4-1-0  | 11962665    | 0.0000188384   |
| 9-2-1-1  | 9425130     | 0.0000148424   |
| 9-2-2-0  | 4350060     | 6.85034*10^-6  |
| 7-6-0-0  | 2944656     | 4.63715*10^-6  |
| 9-3-1-0  | 2658370     | 4.18632*10^-6  |
| 8-5-0-0  | 1656369     | 2.6084*10^-6   |
| 10-1-1-1 | 628342      | 9.89494*10^-7  |
| 9-4-0-0  | 511225      | 8.05062*10^-7  |
| 10-2-1-0 | 290004      | 4.56689*10^-7  |
| 10-3-0-0 | 81796       | 1.2881*10^-7   |
| 11-1-1-0 | 13182       | 2.07586*10^-8  |
| 11-2-0-0 | 6084        | 9.5809*10^-9   |
| 12-1-0-0 | 169         | 2.66136*10^-10 |
| 13-0-0-0 | 1           | 1.57477*10^-12 |

Αν θέλουμε να μετρήσουμε γενικά την κατανομή και όχι την συγκεκριμένη (π.χ. 4-3-3-3 ή 3-4-3-3 ή ...) θα πρέπει να μετρήσουμε πόσες φορές έχουμε την συγκεκριμένη τετράδα. Οι διαφορετικές περιπτώσεις είναι:

* Να είναι όλα τα X, Y, Z και W διαφορετικά, π.χ. 5431. Οι περιπτώσεις είναι $4!=24$ αφού ο κάθε αριθμός μπαίνει σε οποιαδήποτε θέση.
* Να υπάρχει ένα ζευγάρι ίσων και τα άλλα διαφορετικά, π.χ. 5440. Οι περιπτώσεις είναι $4!/2!=12$, αφού τα 4-4 τα έχουμε πάρει $2!$ φορές το καθένα.
* Να υπάρχει μία τριάδα ίδια και το άλλο διαφορετικό, π.χ. 2227. Οι περιπτώσεις είναι $4!/3!=4$, αφού όπως πριν τα 2-2-2 τα πήραμε $3!$ φορές.

Δεν γίνεται να υπάρχουν 2 ζεύγη, όπως και όλα ίδια, αφού τότε δεν θα μπορούσαν να κάνουν άθροισμα 13. Πίσω λοιπόν στους υπολογισμούς. Ο προηγούμενος πίνακας όπου η 2η στήλη πολλαπλασιάζεται με τα αντίστοιχα προηγούμενα νούμερα είναι:

| Κατανομή | Περιπτώσεις |Πιθανότητα|
|:--------:|:------------:|:--------:|
| 4-4-3-2  | 136852887600 | 0.215512       |
| 5-3-3-2  | 98534079072  | 0.155168       |
| 5-4-3-1  | 82111732560  | 0.129307       |
| 5-4-2-2  | 67182326640  | 0.105797       |
| 4-3-3-3  | 66905856160  | 0.105361       |
| 6-3-2-2  | 35830574208  | 0.0564249      |
| 6-4-2-1  | 29858811840  | 0.0470207      |
| 6-3-3-1  | 21896462016  | 0.0344819      |
| 5-5-2-1  | 20154697992  | 0.031739       |
| 4-4-4-1  | 19007345500  | 0.0299322      |
| 7-3-2-1  | 11943524736  | 0.0188083      |
| 6-4-3-0  | 8421716160   | 0.0132623      |
| 5-4-4-0  | 7895358900   | 0.0124334      |
| 5-5-3-0  | 5684658408   | 0.00895203     |
| 6-5-1-1  | 4478821776   | 0.00705311     |
| 6-5-2-0  | 4134297024   | 0.00651056     |
| 7-2-2-2  | 3257324928   | 0.00512954     |
| 7-4-1-1  | 2488234320   | 0.0039184      |
| 7-4-2-0  | 2296831680   | 0.00361698     |
| 7-3-3-0  | 1684343232   | 0.00265245     |
| 8-2-2-1  | 1221496848   | 0.00192358     |
| 8-3-1-1  | 746470296    | 0.00117552     |
| 7-5-1-0  | 689049504    | 0.00108509     |
| 8-3-2-0  | 689049504    | 0.00108509     |
| 6-6-1-0  | 459366336    | 0.000723396    |
| 8-4-1-0  | 287103960    | 0.000452123    |
| 9-2-1-1  | 113101560    | 0.000178109    |
| 9-3-1-0  | 63800880     | 0.000100472    |
| 9-2-2-0  | 52200720     | 0.0000822041   |
| 7-6-0-0  | 35335872     | 0.0000556459   |
| 8-5-0-0  | 19876428     | 0.0000313008   |
| 10-2-1-0 | 6960096      | 0.0000109605   |
| 9-4-0-0  | 6134700      | 9.66074*10^-6  |
| 10-1-1-1 | 2513368      | 3.95798*10^-6  |
| 10-3-0-0 | 981552       | 1.54572*10^-6  |
| 11-1-1-0 | 158184       | 2.49103*10^-7  |
| 11-2-0-0 | 73008        | 1.14971*10^-7  |
| 12-1-0-0 | 2028         | 3.19363*10^-9  |
| 13-0-0-0 | 4            | 6.29908*10^-12 |
| Σύνολο   | 635013559600 |                |


## Ομάδες Χεριών
Με μία απλή πρόσθεση μπορούμε να υπολογίσουμε τις εξής περιπτώσεις

### Ομαλή κατανομή
Αφού ομαλή χαρακτηρίζεται μία κατανομή με

* 5-3-3-2
* 4-4-3-2
* 4-3-3-3

τα χέρια είναι

$$98534079072+136852887600+66905856160=302.292.822.832$$

που σε πιθανότητα μεταφράζεται σε $302292822832/635013559600= 47,6\%$. Άρα τις μισές περίπου διανομές θα έχεις ομαλή κατανομή.

### Δίχρωμη
Ως δίχρωμη χαρακτηρίζεται μία κατανομή με

* 5-4-2-2
* 5-4-3-1
* 5-5-2-1
* 5-5-3-0
* 6-5-1-1
* 6-5-2-0
* 6-6-1-0
* 7-6-0-0

με απλές προσθέσεις όμοια με πριν

$$ 82111732560 +
67182326640 +
20154697992 +
5684658408 +
4478821776 +
4134297024 +
459366336 +
35335872=184241236608$$

που σε πιθανότητα μεταφράζεται σε $184241236608/635013559600= 29,0137\%$. Άρα μία περίπου στις 3 διανομές θα έχεις δίχρωμη κατανομή.

### Μονόχρωμη
Ως μονόχρωμη χαρακτηρίζεται μία κατανομή με

* 6-3-2-2
* 6-3-3-1
* 6-4-2-1
* 6-4-3-0
* 7-2-2-2
* 7-3-2-1
* 7-3-3-0
* 7-4-1-1
* 7-4-2-0
* 7-5-1-0
* 8-2-2-1
* 8-3-1-1
* 8-3-2-0
* 8-4-1-0
* 8-5-0-0
* 9-2-1-1
* 9-2-2-0
* 9-3-1-0
* 9-4-0-0
* 10-1-1-1
* 10-2-1-0
* 10-3-0-0
* 11-1-1-0
* 11-2-0-0
* 12-1-0-0
* 13-0-0-0

με απλές προσθέσεις όμοια με πριν

$$ 82111732560 +
67182326640 +
20154697992 +
5684658408 +
4478821776 +
4134297024 +
459366336 +
35335872=184241236608$$

που σε πιθανότητα μεταφράζεται σε $184241236608/635013559600= 29,0137\%$. Άρα μία περίπου στις 3 διανομές θα έχεις δίχρωμη κατανομή.

# Κώδικας Mathematica

```
total = Binomial[52, 13];
Select[Flatten[Table[Table[Table[{x, y, z, 13 - x - y - z}, {z, y, 0, -1}], {y, x, 0, -1}], {x, 13, 0, -1}], 2], 0 <= #[[4]] <= #[[3]] &];
f[x_] := {StringForm["`1`-`2`-`3`-`4`", x[[1]], x[[2]], x[[3]], x[[4]]],a = Binomial[13, x[[1]]]*Binomial[13, x[[2]]]*Binomial[13, x[[3]]]*Binomial[13, x[[4]]], a/total // N, b = a*Length[Permutations[x]], b/total // N}
t = Map[f, %%];
Sort[t, #1[[2]] > #2[[2]] &];
%[[All, {1, 2, 3}]] // TableForm
Sort[t, #1[[4]] > #2[[4]] &];
%[[All, {1, 4, 5}]] // TableForm
```
